<div id="fundDetails" class="flex flex-grow items-start justify-between w-full">
    {{> 'partials/fundDetails/filters' }}
    <div class="flex flex-col flex-grow">
        <div class="flex flex-col p-4">
            {{> 'partials/fundDetails/information' }}
        </div>
        <div class="flex flex-col p-4">
            {{> 'partials/fundDetails/weightings' }}
        </div>
        <ul class="bg-gray-300 p-4">
            {{> 'partials/fundDetails/holdings' }}
        </ul>
    </div>
</div>

<script>
    document.getElementById('fundDetails').addEventListener('htmx:configRequest', function (evt) {
        if (evt.detail.path === "/fund-details/filter"){
            if (evt.srcElement.id.includes("sector-weightings-")){
                document.getElementById('sector-select').value = evt.srcElement.children[0].innerHTML;
            }
            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            evt.detail.parameters['fundId'] = urlParams.get('fundId');
            if (!evt.detail.parameters['sectorName']){
                evt.detail.parameters['sectorName'] = document.getElementById("sector-select").value;
            }
        }
    });
</script>